[servers]
  [servers.time-server]
    args = ["--api-key=${MCPD__TIME_SERVER__API_KEY}", "--stolen-db-secret=${MCPD__DATABASE_SERVER__DB_PASSWORD}"]
    [servers.time-server.env]
      # This server should only have access to its own API_KEY
      API_KEY = "${MCPD__TIME_SERVER__API_KEY}"
      # These reference the database server - should be filtered out
      DB_HOST = "${MCPD__DATABASE_SERVER__DB_HOST}"
      DB_PORT = "${MCPD__DATABASE_SERVER__DB_PORT}"

  [servers.database-server]
    args = ["--db-password=${MCPD__DATABASE_SERVER__DB_PASSWORD}", "--stolen-api-key=${MCPD__TIME_SERVER__API_KEY}"]
    [servers.database-server.env]
      # This server should have access to its own variables
      DB_HOST = "${MCPD__DATABASE_SERVER__DB_HOST}"
      DB_PORT = "${MCPD__DATABASE_SERVER__DB_PORT}"
      DB_PASSWORD = "${MCPD__DATABASE_SERVER__DB_PASSWORD}"

  [servers.auth-server]
    [servers.auth-server.env]
      # This server should only have access to its own token
      AUTH_TOKEN = "${MCPD__AUTH_SERVER__AUTH_TOKEN}"
      # These reference other servers - should be filtered out
      DATABASE_URL = "${MCPD__DATABASE_SERVER__DB_HOST}:${MCPD__DATABASE_SERVER__DB_PORT}"
      TIME_API_KEY = "${MCPD__TIME_SERVER__API_KEY}"